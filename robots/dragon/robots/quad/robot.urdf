<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from euclid_201709.urdf.xacro       | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="dragon">
  <!--  model type 1: head-->
  <!--  model type 2: baselink (attached with imu, pc)-->
  <!--  model type 3: general -->
  <!--  model type 4: end -->
  <!-- general attribute -->
  <baselink name="fc"/>
  <thrust_link name="thrust"/>
  <!-- dynamics -->
  <m_f_rate value="0"/>
  <!-- [N] -->
  <!-- link -->
  <link name="link1">
    <inertial>
      <origin rpy="0 0 0" xyz="0.22709 -0.00667 -0.02721"/>
      <mass value="0.7968"/>
      <inertia ixx="0.00095" ixy="-0.00098" ixz="0.0003" iyy="0.0151" iyz="0.0001" izz="0.0148"/>
      <!--
          <origin xyz="${link_length* 0.5 + 18.25 * 0.001} ${-7.17 * 0.001} ${-25.73 * 0.001}" rpy="0 0 0"/>
          <mass value="0.7408" />
          <inertia
              ixx="0.00095" iyy="0.0143" izz="0.0139"
              ixy="-0.00099" ixz="0.0003" iyz="0.0001"/>
          -->
    </inertial>
    <!-- box collision geometry does not work well for FCL -->
    <collision>
      <origin rpy="0 0 0" xyz="0.212 0 0"/>
      <geometry>
        <box size="0.424 0.15 0.1686"/>
      </geometry>
    </collision>
    <!-- cylinder collision geometry works well for FCL
    <collision>
      <origin rpy="0 ${pi/2} 0" xyz="${link_length* 0.5} 0 0"/>
      <geometry>
        <cylinder length="${link_length}" radius="0.06" />
      </geometry>
    </collision>
    -->
    <visual>
      <origin rpy="0 0 0" xyz="0.212 0 0"/>
      <geometry>
        <mesh filename="package://dragon/urdf/mesh/ducted_fan_head_link.dae"/>
      </geometry>
    </visual>
  </link>
  <gazebo reference="link1">
    <dampingFactor>0.00</dampingFactor>
  </gazebo>
  <!-- gimbal roll -->
  <joint name="gimbal1_roll" type="revolute">
    <limit effort="3" lower="-3.14" upper="3.14" velocity="12.5"/>
    <parent link="link1"/>
    <child link="gimbal1_roll_module"/>
    <origin rpy="0 0 0" xyz="0.212 0 0"/>
    <axis xyz="1 0 0"/>
    <dynamics damping="0.1" friction="0.0"/>
  </joint>
  <link name="gimbal1_roll_module">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.0276 0.00042 0.01548"/>
      <mass value="0.4604"/>
      <inertia ixx="0.0004" ixy="0" ixz="-0.0003" iyy="0.0004" iyz="0" izz="0.0003"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.01 0 0"/>
      <geometry>
        <mesh filename="package://dragon/urdf/mesh/ducted_fan_gimbal_roll.dae"/>
      </geometry>
    </visual>
    <!-- box collision not work good for FCL
      <collision>
        <origin rpy="0 0 0" xyz="${gimbal_roll_x_offset}  0 0"/>
        <geometry>
          <box size="0.1 0.3 0.1686"/>
        </geometry>
      </collision>
      -->
    <!-- cylinder collision geometry works well for FCL -->
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0.02"/>
      <geometry>
        <cylinder length="0.3" radius="0.09"/>
      </geometry>
    </collision>
  </link>
  <!-- gimbal pitch -->
  <joint name="gimbal1_pitch" type="revolute">
    <limit effort="3" lower="-3.14" upper="3.14" velocity="12.5"/>
    <parent link="gimbal1_roll_module"/>
    <child link="gimbal1_pitch_module"/>
    <origin rpy="0 0 0" xyz="0 0 0.037"/>
    <axis xyz="0 1 0"/>
    <dynamics damping="0.1" friction="0.0"/>
  </joint>
  <link name="gimbal1_pitch_module">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.00033  -0.00871"/>
      <mass value="0.5301"/>
      <inertia ixx="0.0061" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0061"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://dragon/urdf/mesh/ducted_fan_gimbal_pitch.dae"/>
      </geometry>
    </visual>
  </link>
  <!-- rotor -->
  <joint name="rotor1" type="continuous">
    <limit effort="100.0" lower="2" upper="30" velocity="0.5"/>
    <parent link="gimbal1_pitch_module"/>
    <child link="thrust1"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="thrust1">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.0001"/>
      <inertia ixx="0.00001" ixy="0.0" ixz="0.0" iyy="0.00001" iyz="0.0" izz="0.00002"/>
    </inertial>
  </link>
  <!-- special part of duct fun -->
  <joint name="edf1_left_mount" type="fixed">
    <child link="edf1_left"/>
    <parent link="gimbal1_pitch_module"/>
    <origin rpy="0 0 0" xyz="0 0.1115 0 "/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="edf1_left">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000002"/>
    </inertial>
  </link>
  <joint name="edf1_right_mount" type="fixed">
    <child link="edf1_right"/>
    <parent link="gimbal1_pitch_module"/>
    <origin rpy="0 0 0" xyz="0 -0.1115 0 "/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="edf1_right">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000002"/>
    </inertial>
  </link>
  <gazebo reference="thrust1">
    <dampingFactor>0.00</dampingFactor>
  </gazebo>
  <joint name="joint1_pitch" type="revolute">
    <limit effort="10.0" lower="-1.5707963267948966" upper="1.5707963267948966" velocity="0.1"/>
    <parent link="link1"/>
    <child link="inter_joint1"/>
    <origin rpy="0 0 0" xyz="0.424 0 0"/>
    <axis xyz="0 1 0"/>
    <dynamics damping="0.9" friction="0.05"/>
  </joint>
  <!-- inter joint -->
  <link name="inter_joint1">
    <!-- common inertial -->
    <inertial>
      <origin rpy="0 0 0" xyz="0.029179999999999998 -0.0042699999999999995 -0.0015500000000000002"/>
      <mass value="0.1329"/>
      <inertia ixx="0.0001" ixy="0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.02575 0 0"/>
      <geometry>
        <mesh filename="package://dragon/urdf/mesh/inter_joint_junction.dae"/>
      </geometry>
    </visual>
  </link>
  <joint name="joint1_yaw" type="revolute">
    <limit effort="10.0" lower="-1.5707963267948966" upper="1.5707963267948966" velocity="0.1"/>
    <parent link="inter_joint1"/>
    <child link="link2"/>
    <origin rpy="0 0 0" xyz="0.0515 0 0"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.9" friction="0.05"/>
  </joint>
  <gazebo reference="inter_joint1">
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
  </gazebo>
  <!-- dummy root link for KDL -->
  <link name="root">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000002"/>
    </inertial>
  </link>
  <joint name="root_joint" type="fixed">
    <parent link="root"/>
    <child link="link1"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <transmission name="joint1_pitch_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint1_pitch">
      <!-- TODO: effort is torque, maybe position is enough -->
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="joint_servo{self}_pitch">
      <!-- TODO: effort is torque, maybe position is enough -->
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="joint1_yaw_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint1_yaw">
      <!-- TODO: effort is torque, maybe position is enough -->
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="joint_servo{self}_yaw">
      <!-- TODO: effort is torque, maybe position is enough -->
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="gimbal1_roll_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="gimbal1_roll">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="gimbal_servo{self}_roll">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="gimbal1_pitch_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="gimbal1_pitch">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="gimbal_servo{self}_pitch">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="rotor1_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rotor1">
      <hardwareInterface>RotorInterface</hardwareInterface>
    </joint>
    <actuator name="rotor1">
      <hardwareInterface>RotorInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="link1">
    <mu1>0.4</mu1>
    <mu2>0.4</mu2>
  </gazebo>
  <!-- link -->
  <link name="link2">
    <inertial>
      <origin rpy="0 0 0" xyz="0.22154 -0.00474 -0.01568"/>
      <mass value="1.1348"/>
      <inertia ixx="0.0018" ixy="-0.0009" ixz="-0.0006" iyy="0.0228" iyz="0.0001" izz="0.0219"/>
      <!--
              <origin xyz="${link_length* 0.5 + 11.92 * 0.001} ${-4.98 * 0.001} ${-14.07 * 0.001}" rpy="0 0 0"/>
              <mass value="1.07879" />
              <inertia
                  ixx="0.0018" iyy="0.0219" izz="0.0211"
                  ixy="-0.001" ixz="-0.0007" iyz="0.0001"/>
              -->
    </inertial>
    <!-- box collision geometry does not work well for FCL -->
    <collision>
      <origin rpy="0 0 0" xyz="0.212 0 0"/>
      <geometry>
        <box size="0.424 0.15 0.1686"/>
      </geometry>
    </collision>
    <!-- cylinder collision geometry works well for FCL
    <collision>
      <origin rpy="0 ${pi/2} 0" xyz="${link_length* 0.5} 0 0"/>
      <geometry>
        <cylinder length="${link_length}" radius="0.06" />
      </geometry>
    </collision>
    -->
    <visual>
      <origin rpy="0 0 0" xyz="0.212 0 0"/>
      <geometry>
        <mesh filename="package://dragon/urdf/mesh/ducted_fan_baselink.dae"/>
      </geometry>
    </visual>
  </link>
  <gazebo reference="link2">
    <dampingFactor>0.00</dampingFactor>
  </gazebo>
  <!-- gimbal roll -->
  <joint name="gimbal2_roll" type="revolute">
    <limit effort="3" lower="-3.14" upper="3.14" velocity="12.5"/>
    <parent link="link2"/>
    <child link="gimbal2_roll_module"/>
    <origin rpy="0 0 0" xyz="0.212 0 0"/>
    <axis xyz="1 0 0"/>
    <dynamics damping="0.1" friction="0.0"/>
  </joint>
  <link name="gimbal2_roll_module">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.0276 0.00042 0.01548"/>
      <mass value="0.4604"/>
      <inertia ixx="0.0004" ixy="0" ixz="-0.0003" iyy="0.0004" iyz="0" izz="0.0003"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.01 0 0"/>
      <geometry>
        <mesh filename="package://dragon/urdf/mesh/ducted_fan_gimbal_roll.dae"/>
      </geometry>
    </visual>
    <!-- box collision not work good for FCL
      <collision>
        <origin rpy="0 0 0" xyz="${gimbal_roll_x_offset}  0 0"/>
        <geometry>
          <box size="0.1 0.3 0.1686"/>
        </geometry>
      </collision>
      -->
    <!-- cylinder collision geometry works well for FCL -->
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0.02"/>
      <geometry>
        <cylinder length="0.3" radius="0.09"/>
      </geometry>
    </collision>
  </link>
  <!-- gimbal pitch -->
  <joint name="gimbal2_pitch" type="revolute">
    <limit effort="3" lower="-3.14" upper="3.14" velocity="12.5"/>
    <parent link="gimbal2_roll_module"/>
    <child link="gimbal2_pitch_module"/>
    <origin rpy="0 0 0" xyz="0 0 0.037"/>
    <axis xyz="0 1 0"/>
    <dynamics damping="0.1" friction="0.0"/>
  </joint>
  <link name="gimbal2_pitch_module">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.00033  -0.00871"/>
      <mass value="0.5301"/>
      <inertia ixx="0.0061" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0061"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://dragon/urdf/mesh/ducted_fan_gimbal_pitch.dae"/>
      </geometry>
    </visual>
  </link>
  <!-- rotor -->
  <joint name="rotor2" type="continuous">
    <limit effort="100.0" lower="2" upper="30" velocity="0.5"/>
    <parent link="gimbal2_pitch_module"/>
    <child link="thrust2"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="thrust2">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.0001"/>
      <inertia ixx="0.00001" ixy="0.0" ixz="0.0" iyy="0.00001" iyz="0.0" izz="0.00002"/>
    </inertial>
  </link>
  <!-- special part of duct fun -->
  <joint name="edf2_left_mount" type="fixed">
    <child link="edf2_left"/>
    <parent link="gimbal2_pitch_module"/>
    <origin rpy="0 0 0" xyz="0 0.1115 0 "/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="edf2_left">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000002"/>
    </inertial>
  </link>
  <joint name="edf2_right_mount" type="fixed">
    <child link="edf2_right"/>
    <parent link="gimbal2_pitch_module"/>
    <origin rpy="0 0 0" xyz="0 -0.1115 0 "/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="edf2_right">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000002"/>
    </inertial>
  </link>
  <gazebo reference="thrust2">
    <dampingFactor>0.00</dampingFactor>
  </gazebo>
  <joint name="joint2_pitch" type="revolute">
    <limit effort="10.0" lower="-1.5707963267948966" upper="1.5707963267948966" velocity="0.1"/>
    <parent link="link2"/>
    <child link="inter_joint2"/>
    <origin rpy="0 0 0" xyz="0.424 0 0"/>
    <axis xyz="0 1 0"/>
    <dynamics damping="0.9" friction="0.05"/>
  </joint>
  <!-- inter joint -->
  <link name="inter_joint2">
    <!-- common inertial -->
    <inertial>
      <origin rpy="0 0 0" xyz="0.029179999999999998 -0.0042699999999999995 -0.0015500000000000002"/>
      <mass value="0.1329"/>
      <inertia ixx="0.0001" ixy="0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.02575 0 0"/>
      <geometry>
        <mesh filename="package://dragon/urdf/mesh/inter_joint_junction.dae"/>
      </geometry>
    </visual>
  </link>
  <joint name="joint2_yaw" type="revolute">
    <limit effort="10.0" lower="-1.5707963267948966" upper="1.5707963267948966" velocity="0.1"/>
    <parent link="inter_joint2"/>
    <child link="link3"/>
    <origin rpy="0 0 0" xyz="0.0515 0 0"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.9" friction="0.05"/>
  </joint>
  <gazebo reference="inter_joint2">
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
  </gazebo>
  <link name="fc">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000002"/>
    </inertial>
  </link>
  <joint name="fc_joint" type="fixed">
    <child link="fc"/>
    <parent link="link2"/>
    <origin rpy="0 0 0" xyz="0.316 -0.004 0.043"/>
    <axis xyz="0 0 1"/>
  </joint>
  <transmission name="joint2_pitch_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint2_pitch">
      <!-- TODO: effort is torque, maybe position is enough -->
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="joint_servo{self}_pitch">
      <!-- TODO: effort is torque, maybe position is enough -->
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="joint2_yaw_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint2_yaw">
      <!-- TODO: effort is torque, maybe position is enough -->
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="joint_servo{self}_yaw">
      <!-- TODO: effort is torque, maybe position is enough -->
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="gimbal2_roll_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="gimbal2_roll">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="gimbal_servo{self}_roll">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="gimbal2_pitch_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="gimbal2_pitch">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="gimbal_servo{self}_pitch">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="rotor2_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rotor2">
      <hardwareInterface>RotorInterface</hardwareInterface>
    </joint>
    <actuator name="rotor2">
      <hardwareInterface>RotorInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="link2">
    <mu1>0.4</mu1>
    <mu2>0.4</mu2>
  </gazebo>
  <!-- link -->
  <link name="link3">
    <inertial>
      <origin rpy="0 0 0" xyz="0.19922 -0.0058 -0.01695"/>
      <mass value="0.9289"/>
      <inertia ixx="0.0015" ixy="-0.0008" ixz="-0.0001" iyy="0.0198" iyz="0.0001" izz="0.0189"/>
      <!--
              <origin xyz="${link_length* 0.5 - 11.75 * 0.001} ${-6.17 * 0.001} ${-15.04 * 0.001}" rpy="0 0 0"/>
              <mass value="0.8729" />
              <inertia
                  ixx="0.0015" iyy="0.0189" izz="0.0181"
                  ixy="-0.0008" ixz="-0.0002" iyz="0.0001"/>
              -->
    </inertial>
    <!-- box collision geometry does not work well for FCL -->
    <collision>
      <origin rpy="0 0 0" xyz="0.212 0 0"/>
      <geometry>
        <box size="0.424 0.15 0.1686"/>
      </geometry>
    </collision>
    <!-- cylinder collision geometry works well for FCL
    <collision>
      <origin rpy="0 ${pi/2} 0" xyz="${link_length* 0.5} 0 0"/>
      <geometry>
        <cylinder length="${link_length}" radius="0.06" />
      </geometry>
    </collision>
    -->
    <visual>
      <origin rpy="0 0 0" xyz="0.212 0 0"/>
      <geometry>
        <mesh filename="package://dragon/urdf/mesh/ducted_fan_general_link.dae"/>
      </geometry>
    </visual>
  </link>
  <gazebo reference="link3">
    <dampingFactor>0.00</dampingFactor>
  </gazebo>
  <!-- gimbal roll -->
  <joint name="gimbal3_roll" type="revolute">
    <limit effort="3" lower="-3.14" upper="3.14" velocity="12.5"/>
    <parent link="link3"/>
    <child link="gimbal3_roll_module"/>
    <origin rpy="0 0 0" xyz="0.212 0 0"/>
    <axis xyz="1 0 0"/>
    <dynamics damping="0.1" friction="0.0"/>
  </joint>
  <link name="gimbal3_roll_module">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.0276 0.00042 0.01548"/>
      <mass value="0.4604"/>
      <inertia ixx="0.0004" ixy="0" ixz="-0.0003" iyy="0.0004" iyz="0" izz="0.0003"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.01 0 0"/>
      <geometry>
        <mesh filename="package://dragon/urdf/mesh/ducted_fan_gimbal_roll.dae"/>
      </geometry>
    </visual>
    <!-- box collision not work good for FCL
      <collision>
        <origin rpy="0 0 0" xyz="${gimbal_roll_x_offset}  0 0"/>
        <geometry>
          <box size="0.1 0.3 0.1686"/>
        </geometry>
      </collision>
      -->
    <!-- cylinder collision geometry works well for FCL -->
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0.02"/>
      <geometry>
        <cylinder length="0.3" radius="0.09"/>
      </geometry>
    </collision>
  </link>
  <!-- gimbal pitch -->
  <joint name="gimbal3_pitch" type="revolute">
    <limit effort="3" lower="-3.14" upper="3.14" velocity="12.5"/>
    <parent link="gimbal3_roll_module"/>
    <child link="gimbal3_pitch_module"/>
    <origin rpy="0 0 0" xyz="0 0 0.037"/>
    <axis xyz="0 1 0"/>
    <dynamics damping="0.1" friction="0.0"/>
  </joint>
  <link name="gimbal3_pitch_module">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.00033  -0.00871"/>
      <mass value="0.5301"/>
      <inertia ixx="0.0061" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0061"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://dragon/urdf/mesh/ducted_fan_gimbal_pitch.dae"/>
      </geometry>
    </visual>
  </link>
  <!-- rotor -->
  <joint name="rotor3" type="continuous">
    <limit effort="100.0" lower="2" upper="30" velocity="0.5"/>
    <parent link="gimbal3_pitch_module"/>
    <child link="thrust3"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="thrust3">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.0001"/>
      <inertia ixx="0.00001" ixy="0.0" ixz="0.0" iyy="0.00001" iyz="0.0" izz="0.00002"/>
    </inertial>
  </link>
  <!-- special part of duct fun -->
  <joint name="edf3_left_mount" type="fixed">
    <child link="edf3_left"/>
    <parent link="gimbal3_pitch_module"/>
    <origin rpy="0 0 0" xyz="0 0.1115 0 "/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="edf3_left">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000002"/>
    </inertial>
  </link>
  <joint name="edf3_right_mount" type="fixed">
    <child link="edf3_right"/>
    <parent link="gimbal3_pitch_module"/>
    <origin rpy="0 0 0" xyz="0 -0.1115 0 "/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="edf3_right">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000002"/>
    </inertial>
  </link>
  <gazebo reference="thrust3">
    <dampingFactor>0.00</dampingFactor>
  </gazebo>
  <joint name="joint3_pitch" type="revolute">
    <limit effort="10.0" lower="-1.5707963267948966" upper="1.5707963267948966" velocity="0.1"/>
    <parent link="link3"/>
    <child link="inter_joint3"/>
    <origin rpy="0 0 0" xyz="0.424 0 0"/>
    <axis xyz="0 1 0"/>
    <dynamics damping="0.9" friction="0.05"/>
  </joint>
  <!-- inter joint -->
  <link name="inter_joint3">
    <!-- common inertial -->
    <inertial>
      <origin rpy="0 0 0" xyz="0.029179999999999998 -0.0042699999999999995 -0.0015500000000000002"/>
      <mass value="0.1329"/>
      <inertia ixx="0.0001" ixy="0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.02575 0 0"/>
      <geometry>
        <mesh filename="package://dragon/urdf/mesh/inter_joint_junction.dae"/>
      </geometry>
    </visual>
  </link>
  <joint name="joint3_yaw" type="revolute">
    <limit effort="10.0" lower="-1.5707963267948966" upper="1.5707963267948966" velocity="0.1"/>
    <parent link="inter_joint3"/>
    <child link="link4"/>
    <origin rpy="0 0 0" xyz="0.0515 0 0"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.9" friction="0.05"/>
  </joint>
  <gazebo reference="inter_joint3">
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
  </gazebo>
  <transmission name="joint3_pitch_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint3_pitch">
      <!-- TODO: effort is torque, maybe position is enough -->
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="joint_servo{self}_pitch">
      <!-- TODO: effort is torque, maybe position is enough -->
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="joint3_yaw_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint3_yaw">
      <!-- TODO: effort is torque, maybe position is enough -->
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="joint_servo{self}_yaw">
      <!-- TODO: effort is torque, maybe position is enough -->
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="gimbal3_roll_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="gimbal3_roll">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="gimbal_servo{self}_roll">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="gimbal3_pitch_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="gimbal3_pitch">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="gimbal_servo{self}_pitch">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="rotor3_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rotor3">
      <hardwareInterface>RotorInterface</hardwareInterface>
    </joint>
    <actuator name="rotor3">
      <hardwareInterface>RotorInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="link3">
    <mu1>0.4</mu1>
    <mu2>0.4</mu2>
  </gazebo>
  <!-- link -->
  <link name="link4">
    <inertial>
      <origin rpy="0 0 0" xyz="0.16774 -0.00011 -0.02072"/>
      <mass value="0.7943"/>
      <inertia ixx="0.0012" ixy="0.0" ixz="0.0003" iyy="0.0145" iyz="0.0000" izz="0.0134"/>
      <!--
            <origin xyz="${link_length* 0.5 - 45.44 * 0.001} ${-0.12 * 0.001} ${-18.74 * 0.001}" rpy="0 0 0"/>
            <mass value="0.7383" />
            <inertia
                ixx="0.0012" iyy="0.0137" izz="0.0126"
                ixy="0.0" ixz="0.0002" iyz="0.0"/>
            -->
    </inertial>
    <!-- box collision geometry does not work well for FCL -->
    <collision>
      <origin rpy="0 0 0" xyz="0.212 0 0"/>
      <geometry>
        <box size="0.424 0.15 0.1686"/>
      </geometry>
    </collision>
    <!-- cylinder collision geometry works well for FCL
    <collision>
      <origin rpy="0 ${pi/2} 0" xyz="${link_length* 0.5} 0 0"/>
      <geometry>
        <cylinder length="${link_length}" radius="0.06" />
      </geometry>
    </collision>
    -->
    <visual>
      <origin rpy="0 0 0" xyz="0.212 0 0"/>
      <geometry>
        <mesh filename="package://dragon/urdf/mesh/ducted_fan_end_link.dae"/>
      </geometry>
    </visual>
  </link>
  <gazebo reference="link4">
    <dampingFactor>0.00</dampingFactor>
  </gazebo>
  <!-- gimbal roll -->
  <joint name="gimbal4_roll" type="revolute">
    <limit effort="3" lower="-3.14" upper="3.14" velocity="12.5"/>
    <parent link="link4"/>
    <child link="gimbal4_roll_module"/>
    <origin rpy="0 0 0" xyz="0.212 0 0"/>
    <axis xyz="1 0 0"/>
    <dynamics damping="0.1" friction="0.0"/>
  </joint>
  <link name="gimbal4_roll_module">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.0276 0.00042 0.01548"/>
      <mass value="0.4604"/>
      <inertia ixx="0.0004" ixy="0" ixz="-0.0003" iyy="0.0004" iyz="0" izz="0.0003"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.01 0 0"/>
      <geometry>
        <mesh filename="package://dragon/urdf/mesh/ducted_fan_gimbal_roll.dae"/>
      </geometry>
    </visual>
    <!-- box collision not work good for FCL
      <collision>
        <origin rpy="0 0 0" xyz="${gimbal_roll_x_offset}  0 0"/>
        <geometry>
          <box size="0.1 0.3 0.1686"/>
        </geometry>
      </collision>
      -->
    <!-- cylinder collision geometry works well for FCL -->
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0 0.02"/>
      <geometry>
        <cylinder length="0.3" radius="0.09"/>
      </geometry>
    </collision>
  </link>
  <!-- gimbal pitch -->
  <joint name="gimbal4_pitch" type="revolute">
    <limit effort="3" lower="-3.14" upper="3.14" velocity="12.5"/>
    <parent link="gimbal4_roll_module"/>
    <child link="gimbal4_pitch_module"/>
    <origin rpy="0 0 0" xyz="0 0 0.037"/>
    <axis xyz="0 1 0"/>
    <dynamics damping="0.1" friction="0.0"/>
  </joint>
  <link name="gimbal4_pitch_module">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0.00033  -0.00871"/>
      <mass value="0.5301"/>
      <inertia ixx="0.0061" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0061"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://dragon/urdf/mesh/ducted_fan_gimbal_pitch.dae"/>
      </geometry>
    </visual>
  </link>
  <!-- rotor -->
  <joint name="rotor4" type="continuous">
    <limit effort="100.0" lower="2" upper="30" velocity="0.5"/>
    <parent link="gimbal4_pitch_module"/>
    <child link="thrust4"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="thrust4">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.0001"/>
      <inertia ixx="0.00001" ixy="0.0" ixz="0.0" iyy="0.00001" iyz="0.0" izz="0.00002"/>
    </inertial>
  </link>
  <!-- special part of duct fun -->
  <joint name="edf4_left_mount" type="fixed">
    <child link="edf4_left"/>
    <parent link="gimbal4_pitch_module"/>
    <origin rpy="0 0 0" xyz="0 0.1115 0 "/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="edf4_left">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000002"/>
    </inertial>
  </link>
  <joint name="edf4_right_mount" type="fixed">
    <child link="edf4_right"/>
    <parent link="gimbal4_pitch_module"/>
    <origin rpy="0 0 0" xyz="0 -0.1115 0 "/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="edf4_right">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000002"/>
    </inertial>
  </link>
  <gazebo reference="thrust4">
    <dampingFactor>0.00</dampingFactor>
  </gazebo>
  <transmission name="gimbal4_roll_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="gimbal4_roll">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="gimbal_servo{self}_roll">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="gimbal4_pitch_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="gimbal4_pitch">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="gimbal_servo{self}_pitch">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="rotor4_tran">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rotor4">
      <hardwareInterface>RotorInterface</hardwareInterface>
    </joint>
    <actuator name="rotor4">
      <hardwareInterface>RotorInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="link4">
    <mu1>0.4</mu1>
    <mu2>0.4</mu2>
  </gazebo>
</robot>

