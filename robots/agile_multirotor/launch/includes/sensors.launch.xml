<?xml version="1.0"?>
<!-- <launch> -->

<!--   <arg name="real_machine" default="false" /> -->
<!--   <arg name="simulation" default="false" /> -->
<!--   <arg name="robot_ns" default="agile_multirotor" /> -->

<!--   <group ns="$(arg robot_ns)"> -->

<!--     <group if="$(arg real_machine)"> -->
<!--       <group unless="$(arg simulation)"> -->
<!--         <!-\- fc & IMU & GPS -\-> -->
<!--         <!-\- <include file="$(find spinal_ros_bridge)/launch/serial.launch" > -\-> -->
<!-- 	<include file="$(find spinal)/launch/bridge.launch" > -->
		    
<!--           <arg name="baud" value="921600" /> -->
<!--           <arg name="port" value="/dev/flight_controller" /> -->
<!--         </include> -->

<!--         <!-\- mocap -\-> -->
<!--         <include file="$(find aerial_robot_base)/launch/external_module/mocap.launch" /> -->

<!--       </group> -->
<!--     </group> -->

<!--     <!-\- basic configuration for sensors (e.g. noise sigma) -\-> -->
<!--     <rosparam file="$(find agile_multirotor)/config/sensors/imu/spinal.yaml" command="load" /> -->
<!--     <rosparam file="$(find aerial_robot_base)/config/sensors/gps/ublox_m8n.yaml" command="load" /> -->
<!--     <rosparam file="$(find aerial_robot_base)/config/sensors/mocap.yaml" command="load" /> -->
<!--     <rosparam file="$(find aerial_robot_base)/config/sensors/altmeter/leddar_one.yaml" command="load" /> -->

<!--   </group> -->

<!-- </launch> -->
<launch>

  <arg name="real_machine" default="false" />
  <arg name="simulation" default="false" />
  <arg name="robot_ns" default="agile_multirotor" />

  <group ns="$(arg robot_ns)">

    <group if="$(arg real_machine)">
      <group unless="$(arg simulation)">
        <!-- fc & IMU & GPS -->
        <include file="$(find spinal)/launch/bridge.launch" >
          <arg name="mode" value="serial" />
          <arg name="serial_port" value="/dev/flight_controller" />
          <arg name="serial_baud" value="921600" />
        </include>

        <!-- mocap -->
        <include file="$(find aerial_robot_base)/launch/external_module/mocap.launch" />

	<!-- livox mid360 & fast lio -->
        <include file="$(find livox_ros_driver2)/launch_ROS1/msg_MID360.launch" />
        <include file="$(find fast_lio)/launch/mapping_mid360.launch" >
          <arg name="rviz" value="false" />
        </include>

	<!-- set 326_world coordinate from init camera_init-->
	<node pkg="tf2_ros" type="static_transform_publisher" name="static_tf_publisher" args="2.0 0 0 0 0 0 camera_init 326_world" />
      </group>
    </group>

    <!-- basic configuration for sensors (e.g. noise sigma) -->
    <rosparam file="$(find agile_multirotor)/config/sensors/imu/spinal.yaml" command="load" />
    <rosparam file="$(find aerial_robot_base)/config/sensors/mocap.yaml" command="load" />
    <rosparam file="$(find aerial_robot_base)/config/sensors/lio/livox_mid360.yaml" command="load" />
    <!-- <rosparam file="$(find aerial_robot_base)/config/sensors/altmeter/leddar_one.yaml" command="load" /> -->

  </group>

</launch>

